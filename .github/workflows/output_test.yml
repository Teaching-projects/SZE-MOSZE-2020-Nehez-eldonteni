name: Output_test

on: push

jobs:
        Testing:
                runs-on: ubuntu-latest
                steps: 
                - uses: actions/checkout@v2
                - run: sudo apt-get install -y valgrind cppcheck
                - run: make cppcheck
                - uses: actions/upload-artifact@v2
                  with:
                        name: styleformance
                        path: ./testing/styleformance.txt
                - run: make
                - run: make valgrind
                - run: make outputTests
                - run: if [ "$(diff testing/fight.txt testing/manual_calculation.txt)" = "" ]; then echo "Successful comparison! No difference between files." && exit 0; else echo "Something went wrong! There is a difference." && exit 1; fi
